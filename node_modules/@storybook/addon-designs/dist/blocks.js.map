{"version":3,"sources":["../src/manager/components/IFrame.tsx","../src/manager/components/Figma.tsx","../src/manager/components/Figspec.tsx","../src/blocks.tsx","../src/manager/components/hooks/usePan.ts","../src/manager/components/Pan.tsx","../../../node_modules/@storybook/icons/src/icons/SearchIcon.tsx","../../../node_modules/@storybook/icons/src/icons/ZoomIcon.tsx","../../../node_modules/@storybook/icons/src/icons/ZoomOutIcon.tsx","../src/manager/components/ZoomButtons.tsx","../src/manager/components/hooks/useZoom.ts","../src/manager/components/Image.tsx","../src/manager/components/Wrapper.tsx","../src/manager/components/LinkPanel.tsx","../src/manager/components/Sketch.tsx","../src/manager/components/Tabs.tsx","../src/constants.ts"],"names":["IFrame","$container","$loading","$iframe","init_IFrame","__esmMin","config","defer","url","setUrl","useState","loaded","setLoaded","useEffect","handle","jsx","Placeholder","css","createEmbedURL","encodedURL","embedHost","key","value","figmaURLPattern","isFigmaURL","Figma","init_Figma","iframeConfig","useMemo","Figspec_exports","__export","Figspec","Figspec_default","unwrapJson","res","getAccessToken","cfg","listAllFrames","node","a","b","fullscreen","init_Figspec","state","setState","fetchDetails","signal","match","fileKey","nodeId","accessToken","headers","nodeUrl","imageUrl","documentNode","resp","frames","frame","images","nodes","err","fulfilled","fulfil","ac","Fragment","FigspecFileViewer","FigspecFrameViewer","usePan","cb","deps","lastPosition","savePosition","isPanning","setPanState","onMouseDown","useCallback","ev","onTouchStart","touch","move","p","prev","onMouseMove","screenX","screenY","onTouchMove","clear","Pan","children","className","style","defaultValue","onChange","offset","panHandlers","delta","transform","vec","$transformLayer","f","size","forwardedRef","props","color","ZoomOutIcon","ZoomResetIcon","React","ZoomButtons","onZoomIn","onZoomOut","onReset","IconButton","ZoomIcon","useZoom","initialValue","scale","setScale","zoomIn","prevScale","zoomOut","resetZoom","ImagePreview","zoom","imageStyles","FlexBar","Separator","$preview","$image","LinkPanel","Link","v1UrlParser","malformedUrlErrorMessage","pathSegments","s","sid","aid","Sketch","result","parsed","Tabs","tabs","selected","setSelected","SbTabs","tab","lazy","Wrapper","meta","Suspense","AddonName","ParameterName","ResetWrapper","styled","theme","height","collapsed","CollapsedText","DocBlockBase","collapsable","defaultCollapsed","placeholder","showLink","onCollapsedChange","rest","setCollapsed","showOpenInNewTab","ActionBar","newValue","Image","AbsoluteLocater","Design","of","story","useOf"],"mappings":"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","file":"blocks.js","sourcesContent":["/** @jsx jsx */\nimport { FC, ReactNode, useEffect, useState } from \"react\";\nimport { css, jsx } from \"storybook/theming\";\n\nimport { Placeholder } from \"storybook/internal/components\";\n\nimport { IFrameConfigBase } from \"../../config\";\n\ninterface Props {\n  config: IFrameConfigBase;\n\n  /**\n   * Whether to defer loading iframe contents\n   * @default false\n   */\n  defer?: boolean;\n}\n\nexport const IFrame: FC<Props> = ({ config, defer = false }) => {\n  const [url, setUrl] = useState(defer ? undefined : config.url);\n  const [loaded, setLoaded] = useState(false);\n\n  // Defer loading iframe URL.\n  // Some sites (e.g. Figma) detects Fullscreen API capability on\n  // initial load. This is quite common implementation. But in our usage,\n  // it seems that React hold the created <iframe> element when update,\n  // and it causes \"outdated Fullscreen capability\" problem.\n  // This might be a browser bug that \"`fullscreenEnabled` property does not\n  // updated\" but I'm not sure what the correct behavior (I couldn't see the\n  // statement in the Fulscreen API spec).\n  // This side-effect delays the loading of an iframe contents by one frame to\n  // make sure the contents gets updated attributes.\n  // https://github.com/storybookjs/addon-designs/issues/77\n  useEffect(() => {\n    if (!defer) {\n      return;\n    }\n\n    const handle = requestAnimationFrame(() => {\n      setUrl(config.url);\n    });\n\n    return () => cancelAnimationFrame(handle);\n  }, [defer, config.url]);\n\n  useEffect(() => {\n    setLoaded(false);\n  }, [url]);\n\n  return (\n    <div css={$container}>\n      {!loaded && (\n        // @ts-expect-error: @types resolution is completely broken probably due to migration to npm workspace\n        <Placeholder css={$loading}>Loading...</Placeholder>\n      )}\n      <iframe\n        css={$iframe}\n        src={url}\n        allowFullScreen={config.allowFullscreen}\n        onLoad={() => setLoaded(true)}\n      />\n    </div>\n  );\n};\n\nexport default IFrame;\n\nconst $container = css`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n\n  overflow: hidden;\n`;\n\nconst $loading = css`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n\n  transform: translate(-50%, -50%);\n`;\n\nconst $iframe = css`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  border: none;\n\n  z-index: 1;\n`;\n","/** @jsx jsx */\nimport { FC, useMemo } from \"react\";\nimport { jsx } from \"storybook/theming\";\n\nimport { IFrame } from \"./IFrame\";\n\nimport { FigmaConfig, IFrameConfigBase } from \"../../config\";\n\nexport const figmaURLPattern =\n  /https:\\/\\/[\\w.-]+\\.?figma.com\\/([\\w-]+)\\/([0-9a-zA-Z]{22,128})(?:\\/.*)?$/;\n\nexport const isFigmaURL = (url: string) => figmaURLPattern.test(url);\n\ninterface Props {\n  config: FigmaConfig;\n}\n\nexport const Figma: FC<Props> = ({ config }) => {\n  const iframeConfig = useMemo<IFrameConfigBase>(() => {\n    const isValid = isFigmaURL(config.url);\n\n    if (!isValid) {\n      console.warn(\n        \"[storybook-addon-designs] \" +\n          \"The URL you specified is not valid Figma URL.\\n\" +\n          \"The addon fallbacks to normal iframe mode.\" +\n          \"For more detail, please check <https://www.figma.com/developers/embed>.\",\n      );\n      return config;\n    }\n\n    const url = createEmbedURL(\n      config.url,\n      config.embedHost || location.hostname,\n    );\n\n    return {\n      url,\n      allowFullscreen: config.allowFullscreen,\n    };\n  }, [config.url, config.allowFullscreen, config.embedHost]);\n\n  return <IFrame defer config={iframeConfig} />;\n};\n\nfunction createEmbedURL(encodedURL: string, embedHost: string) {\n  const url = new URL(encodedURL);\n  url.hostname = url.hostname.replace(/^www\\./, \"embed.\");\n  url.searchParams.delete(\"embed_origin\");\n  url.searchParams.set(\"embed-host\", embedHost);\n  for (const [key, value] of url.searchParams) {\n    url.searchParams.delete(key);\n    url.searchParams.set(key.replace(/_/g, \"-\"), value);\n  }\n  return url.href;\n}\n","/** @jsx jsx */\nimport type {\n  FileResponse,\n  FileNodesResponse,\n  FileImageResponse,\n  Node,\n} from \"figma-js\";\nimport { FC, Fragment, useEffect, useMemo, useState } from \"react\";\nimport {\n  FigspecFileViewer,\n  FigspecFileViewerProps,\n  FigspecFrameViewer,\n  FigspecFrameViewerProps,\n} from \"@figspec/react\";\nimport { Placeholder } from \"storybook/internal/components\";\nimport { css, jsx } from \"storybook/theming\";\n\nimport { FigspecConfig } from \"../../config\";\n\nimport { figmaURLPattern } from \"./Figma\";\n\nconst fullscreen = css`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n`;\n\ntype RenderItem =\n  | {\n      type: \"file\";\n      props: Pick<\n        FigspecFileViewerProps,\n        \"documentNode\" | \"renderedImages\" | \"link\"\n      >;\n    }\n  | {\n      type: \"frame\";\n      props: Pick<FigspecFrameViewerProps, \"nodes\" | \"renderedImage\" | \"link\">;\n    };\n\ntype Remote<T, E = Error> =\n  | {\n      state: \"fetched\";\n      value: T;\n    }\n  | {\n      state: \"failed\";\n      error: E;\n    }\n  | {\n      state: \"loading\";\n    };\n\nfunction unwrapJson<T>(res: Response): Promise<T> {\n  return res.status !== 200\n    ? Promise.reject(res.statusText)\n    : (res.json() as Promise<T>);\n}\n\n/**\n * Safely get Figma API access token.\n */\nfunction getAccessToken(cfg: FigspecConfig): string | null {\n  if (cfg.accessToken) {\n    return cfg.accessToken;\n  }\n\n  try {\n    return process.env.STORYBOOK_FIGMA_ACCESS_TOKEN ?? null;\n  } catch (err) {\n    // The only case here is no DefinePlugin entry for `process.env` nor\n    // `process.env.STORYBOOK_FIGMA_ACCESS_TOKEN`. We can safely ignore this.\n    return null;\n  }\n}\n\ninterface Props {\n  config: FigspecConfig;\n}\n\nexport const Figspec: FC<Props> = ({ config }) => {\n  const [state, setState] = useState<Remote<RenderItem, string>>({\n    state: \"loading\",\n  });\n\n  const fetchDetails = async (signal: AbortSignal) => {\n    setState({ state: \"loading\" });\n\n    try {\n      const match = config.url.match(figmaURLPattern);\n\n      if (!match) {\n        throw new Error(config.url + \" is not a valid Figma URL.\");\n      }\n\n      const [, , fileKey] = match;\n\n      const url = new URL(config.url);\n\n      const nodeId = url.searchParams.get(\"node-id\");\n\n      const accessToken = getAccessToken(config);\n\n      if (!accessToken) {\n        throw new Error(\"Personal Access Token is required.\");\n      }\n\n      const headers = {\n        \"X-FIGMA-TOKEN\": accessToken,\n      };\n\n      const nodeUrl = new URL(`https://api.figma.com/v1/files/${fileKey}`);\n      const imageUrl = new URL(`https://api.figma.com/v1/images/${fileKey}`);\n\n      imageUrl.searchParams.set(\"format\", \"svg\");\n\n      if (!nodeId) {\n        const documentNode = await fetch(nodeUrl.href, {\n          headers,\n          signal,\n        }).then((resp) => unwrapJson<FileResponse>(resp));\n\n        const frames = listAllFrames(documentNode.document);\n\n        imageUrl.searchParams.set(\n          \"ids\",\n          frames.map((frame) => frame.id).join(\",\"),\n        );\n\n        const images = await fetch(imageUrl.href, {\n          headers,\n          signal,\n        }).then((resp) => unwrapJson<FileImageResponse>(resp));\n\n        setState({\n          state: \"fetched\",\n          value: {\n            type: \"file\",\n            props: {\n              documentNode,\n              renderedImages: images.images,\n              link: config.url,\n            },\n          },\n        });\n        return;\n      }\n\n      nodeUrl.pathname += \"/nodes\";\n\n      nodeUrl.searchParams.set(\"ids\", nodeId);\n      imageUrl.searchParams.set(\"ids\", nodeId);\n\n      const [nodes, images] = await Promise.all([\n        fetch(nodeUrl.href, {\n          headers,\n          signal,\n        }).then((resp) => unwrapJson<FileNodesResponse>(resp)),\n        fetch(imageUrl.href, { headers, signal }).then((resp) =>\n          unwrapJson<FileImageResponse>(resp),\n        ),\n      ]);\n\n      setState({\n        state: \"fetched\",\n        value: {\n          type: \"frame\",\n          props: {\n            nodes,\n            renderedImage: Object.values<string>(images.images)[0],\n            link: config.url,\n          },\n        },\n      });\n    } catch (err) {\n      if (err instanceof DOMException && err.code === DOMException.ABORT_ERR) {\n        return;\n      }\n\n      console.error(err);\n\n      setState({\n        state: \"failed\",\n        error: err instanceof Error ? err.message : String(err),\n      });\n    }\n  };\n\n  useEffect(() => {\n    let fulfilled = false;\n    const fulfil = () => {\n      fulfilled = true;\n    };\n\n    const ac = new AbortController();\n\n    fetchDetails(ac.signal).then(fulfil, fulfil);\n\n    return () => {\n      if (!fulfilled) {\n        ac.abort();\n      }\n    };\n  }, [config.url]);\n\n  switch (state.state) {\n    case \"loading\":\n      return (\n        <Placeholder>\n          <Fragment>Loading Figma file...</Fragment>\n        </Placeholder>\n      );\n    case \"failed\":\n      return (\n        <Placeholder>\n          <Fragment>Failed to load Figma file</Fragment>\n          <Fragment>{state.error}</Fragment>\n        </Placeholder>\n      );\n    case \"fetched\":\n      return state.value.type === \"file\" ? (\n        <FigspecFileViewer css={fullscreen} {...state.value.props} />\n      ) : (\n        <FigspecFrameViewer css={fullscreen} {...state.value.props} />\n      );\n  }\n};\n\nexport default Figspec;\n\nfunction listAllFrames(node: Node): Node[] {\n  if (\"absoluteBoundingBox\" in node) {\n    return [node];\n  }\n\n  if (!node.children || node.children.length === 0) {\n    return [];\n  }\n\n  return node.children.map(listAllFrames).reduce((a, b) => a.concat(b), []);\n}\n","import React, { useState } from \"react\";\nimport type { CSSProperties, FC } from \"react\";\nimport { ActionBar, Placeholder } from \"storybook/internal/components\";\nimport { styled } from \"storybook/theming\";\nimport { useOf, Of } from \"@storybook/addon-docs/blocks\";\n\nimport { Figma as FigmaInternal } from \"./manager/components/Figma\";\nimport { Figspec as FigspecInternal } from \"./manager/components/Figspec\";\nimport { IFrame as IFrameInternal } from \"./manager/components/IFrame\";\nimport { ImagePreview } from \"./manager/components/Image\";\nimport { Wrapper as WrapperInternal } from \"./manager/components/Wrapper\";\n\nimport * as config from \"./config\";\nimport { ParameterName } from \"./constants\";\n\n// Since the exports of `storybook/internal/components` is unstable, I couldn't manage\n// to import the `components.resetWrapper` while maintaining version requirements.\n// This component does similar to the official one at minimum.\n// https://github.com/storybookjs/storybook/blob/4bd2fc9b0677190c59e60fd63841294ab88e80c5/lib/components/src/typography/DocumentFormatting.tsx#L364-L372\n// https://github.com/storybookjs/storybook/blob/4bd2fc9b0677190c59e60fd63841294ab88e80c5/lib/components/src/typography/shared.tsx#L42-L51\nconst ResetWrapper = styled.div(\n  ({ theme }) => `\n  font-family: ${theme.typography.fonts.base};\n  font-size: ${theme.typography.size.s3}px;\n  margin: 0;\n`,\n);\n\nconst Wrapper = styled.div<BlocksCommonProps & { collapsed: boolean }>(\n  ({ theme, height = \"60%\", collapsed }) => `\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding: 0;\n  padding-top: ${\n    collapsed ? \"3em\" : typeof height == \"string\" ? height : height + \"px\"\n  };\n  margin: 25px 0 40px;\n  border: 1px solid ${theme.appBorderColor};\n\n  border-radius: ${theme.appBorderRadius}px;\n  box-shadow:\n    ${\n      theme.base === \"light\"\n        ? \"rgba(0, 0, 0, 0.10) 0 1px 3px 0\"\n        : \"rgba(0, 0, 0, 0.20) 0 2px 5px 0\"\n    };\n`,\n);\n\nconst CollapsedText = styled(Placeholder)`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n\n  transform: translate(-50%, -50%);\n`;\n\nexport interface BlocksCommonProps {\n  /**\n   * **Doc Block Props**\n   *\n   * A `class` prop passed down to embed wrapper.\n   */\n  className?: string;\n  /**\n   * **Doc Block Props**\n   *\n   * A `style` passed down to embed wrapper.\n   */\n  style?: CSSProperties;\n\n  /**\n   * **Doc Block Props**\n   *\n   * Height of the block. Numbers will be converted into pixels.\n   * Relative value (%) is based on width of the block.\n   */\n  height?: string | number;\n\n  /**\n   * **Doc Block Props**\n   *\n   * Whether to allow the block to toggle collapse/expand.\n   * @default true\n   */\n  collapsable?: boolean;\n\n  children?: React.ReactNode;\n\n  /**\n   * **Doc Block Props**\n   *\n   * Render the block with collapsed initially?\n   * Available when `collapsable` is set to `true`.\n   * @default false\n   */\n  defaultCollapsed?: boolean;\n\n  /**\n   * **Doc Block Props**\n   *\n   * Placeholder text shown when the block is collapsed.\n   * Default value differs by a type of the block (e.g. \"Design (Figma)\").\n   */\n  placeholder?: string;\n\n  /**\n   * **Doc Block Props**\n   *\n   * Whether to show an \"Open in new tab\" button.\n   * @default true\n   */\n  showLink?: boolean;\n\n  /**\n   * **Doc Block Props**\n   *\n   * Will be called when a user changed collapse/expand state of the block.\n   */\n  onCollapsedChange?(newValue: boolean, oldValue: boolean): void;\n}\n\nexport const DocBlockBase: FC<BlocksCommonProps> = ({\n  children,\n  collapsable = true,\n  defaultCollapsed = false,\n  placeholder,\n  showLink = true,\n  onCollapsedChange,\n  ...rest\n}) => {\n  const [collapsed, setCollapsed] = useState(!!defaultCollapsed);\n\n  const showOpenInNewTab = showLink && \"url\" in rest;\n\n  return (\n    <ResetWrapper>\n      <Wrapper collapsed={collapsable && collapsed} {...rest}>\n        {collapsable && collapsed ? (\n          <CollapsedText>{placeholder}</CollapsedText>\n        ) : (\n          children\n        )}\n        <ActionBar\n          actionItems={[\n            collapsable && {\n              title: collapsed ? \"Show\" : \"Hide\",\n              onClick: () => {\n                const newValue = !collapsed;\n                if (onCollapsedChange) onCollapsedChange(newValue, collapsed);\n                setCollapsed(newValue);\n              },\n            },\n            showOpenInNewTab && {\n              title: \"Open in new tab\",\n              onClick: () => window.open((rest as any).url, \"_blank\"),\n            },\n          ].filter((s): s is Exclude<typeof s, false> => !!s)}\n        />\n      </Wrapper>\n    </ResetWrapper>\n  );\n};\n\nexport const Figma: FC<\n  Omit<config.FigmaConfig, \"type\"> & BlocksCommonProps\n> = ({ placeholder, ...props }) => (\n  <DocBlockBase placeholder={placeholder ?? \"Design (Figma)\"} {...props}>\n    <FigmaInternal config={{ type: \"figma\", ...props }} />\n  </DocBlockBase>\n);\n\nexport const Figspec: FC<\n  Omit<config.FigspecConfig, \"type\"> & BlocksCommonProps\n> = ({ placeholder, ...props }) => {\n  return (\n    <DocBlockBase placeholder={placeholder ?? \"Design (Figma-Spec)\"} {...props}>\n      <FigspecInternal config={{ type: \"figspec\", ...props }} />\n    </DocBlockBase>\n  );\n};\n\nexport const IFrame: FC<\n  Omit<config.IFrameConfig, \"type\"> & BlocksCommonProps\n> = ({ placeholder, ...props }) => (\n  <DocBlockBase placeholder={placeholder ?? \"Design (iframe)\"} {...props}>\n    <IFrameInternal config={props} />\n  </DocBlockBase>\n);\n\n// Image would do shadowing the native variable (Image constructor, which creates\n// HTMLImageElement), but I think it doesn't matter since there is less chance to\n// use Image constructor in MDX.\nexport const Image: FC<\n  Omit<config.ImageConfig, \"type\"> & BlocksCommonProps\n> = ({ placeholder, ...props }) => (\n  <DocBlockBase placeholder={placeholder ?? \"Design (Image)\"} {...props}>\n    <ImagePreview config={{ type: \"image\", ...props }} />\n  </DocBlockBase>\n);\n\nconst AbsoluteLocater = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n\n  overflow: auto;\n`;\n\nexport interface DesignProps {\n  /**\n   * A reference to a story that has `design` parameter to use for rendering.\n   */\n  of: Of;\n}\n\nexport const Design: FC<DesignProps & Omit<BlocksCommonProps, \"showLink\">> = (\n  props,\n) => {\n  const { of, placeholder, ...rest } = props;\n\n  if (\"of\" in props && of === undefined) {\n    // MDX isn't always type-safe, it's often that users mistype their imports\n    throw new Error(\n      \"Unexpected `of={undefined}`, did you mistype a CSF file reference?\",\n    );\n  }\n\n  const { story } = useOf(of || \"story\", [\"story\"]);\n\n  return (\n    <DocBlockBase placeholder={placeholder ?? \"Design\"} {...rest}>\n      <AbsoluteLocater>\n        <WrapperInternal config={story.parameters[ParameterName]} />\n      </AbsoluteLocater>\n    </DocBlockBase>\n  );\n};\n","import {\n  useCallback,\n  useState,\n  DependencyList,\n  MouseEventHandler,\n  TouchEventHandler,\n} from \"react\";\n\nexport type Point2D = [number, number];\n\ninterface PanController {\n  onMouseDown: MouseEventHandler;\n  onMouseMove: MouseEventHandler;\n  onMouseUp: MouseEventHandler;\n  onMouseLeave: MouseEventHandler;\n  onTouchStart: TouchEventHandler;\n  onTouchMove: TouchEventHandler;\n  onTouchCancel: TouchEventHandler;\n  onTouchEnd: TouchEventHandler;\n}\n\n/**\n * Emulate MouseEvent.movementX and MouseEvent.movementY(Candidate Recommendation)\n * Needed due to lack of support in Safari\n */\ntype UsePan = (\n  cb: (movement: Point2D) => any,\n  deps: DependencyList,\n) => PanController;\n\nexport const usePan: UsePan = (cb, deps) => {\n  const [lastPosition, savePosition] = useState<Point2D>([0, 0]);\n  const [isPanning, setPanState] = useState<boolean>(false);\n\n  const onMouseDown = useCallback<PanController[\"onMouseDown\"]>(\n    (ev) => {\n      // Ensure to turn on pan mode only for main button down\n      if (ev.button !== 0) {\n        return;\n      }\n\n      savePosition([ev.screenX, ev.screenY]);\n      setPanState(true);\n    },\n    [setPanState, savePosition],\n  );\n\n  const onTouchStart = useCallback<PanController[\"onTouchStart\"]>(\n    (ev) => {\n      const touch = ev.touches[0];\n\n      savePosition([touch.screenX, touch.screenY]);\n      setPanState(true);\n    },\n    [setPanState, savePosition],\n  );\n\n  const move = useCallback(\n    (p: Point2D) => {\n      if (!isPanning) {\n        return;\n      }\n\n      savePosition((prev) => {\n        cb([p[0] - prev[0], p[1] - prev[1]]);\n\n        return p;\n      });\n    },\n    [savePosition, isPanning, ...deps],\n  );\n\n  const onMouseMove = useCallback<PanController[\"onMouseMove\"]>(\n    (ev) => {\n      const { screenX, screenY } = ev;\n\n      move([screenX, screenY]);\n    },\n    [move],\n  );\n\n  const onTouchMove = useCallback<PanController[\"onTouchMove\"]>(\n    (ev) => {\n      const { screenX, screenY } = ev.touches[0];\n\n      move([screenX, screenY]);\n    },\n    [savePosition, isPanning, ...deps],\n  );\n\n  const clear = useCallback(() => {\n    savePosition([0, 0]);\n    setPanState(false);\n  }, [setPanState, savePosition]);\n\n  return {\n    onMouseDown,\n    onMouseMove,\n    onMouseUp: clear,\n    onMouseLeave: clear,\n    onTouchStart,\n    onTouchMove,\n    onTouchCancel: clear,\n    onTouchEnd: clear,\n  };\n};\n","/** @jsx jsx */\nimport {\n  useEffect,\n  useMemo,\n  useState,\n  CSSProperties,\n  FC,\n  ReactNode,\n} from \"react\";\nimport { css, jsx } from \"storybook/theming\";\n\nimport { usePan, Point2D } from \"./hooks/usePan\";\n\ninterface Props {\n  children: ReactNode;\n\n  className?: string;\n  style?: CSSProperties;\n\n  defaultValue?: Point2D;\n\n  value?: Point2D;\n\n  onChange?(delta: Point2D): any;\n}\n\nexport const Pan: FC<Props> = ({\n  children,\n  className,\n  style,\n  defaultValue,\n  value,\n  onChange,\n}) => {\n  const [offset, move] = useState<Point2D>([0, 0]);\n\n  useEffect(() => {\n    if (defaultValue) {\n      move(defaultValue);\n    } else {\n      move(value || [0, 0]);\n    }\n  }, [defaultValue]);\n\n  const panHandlers = usePan(\n    (delta) => {\n      if (onChange) {\n        onChange(delta);\n      }\n\n      move((prev) => [prev[0] + delta[0], prev[1] + delta[1]]);\n    },\n    [move, onChange],\n  );\n\n  const transform = useMemo<CSSProperties>(() => {\n    const vec = value || offset;\n\n    return {\n      transform: `translate(${vec[0]}px, ${vec[1]}px)`,\n    };\n  }, [value, offset]);\n\n  return (\n    <div css={$container} className={className} style={style} {...panHandlers}>\n      <div css={$transformLayer} style={transform}>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default Pan;\n\nconst $container = css`\n  position: relative;\n  overflow: hidden;\n\n  &:active {\n    cursor: move;\n  }\n`;\n\nconst $transformLayer = css`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n`;\n","import * as React from 'react';\nimport { IconProps } from '../types';\n\nexport const SearchIcon = /* @__PURE__ */ React.forwardRef<\n  SVGSVGElement,\n  IconProps\n>(({ color = 'currentColor', size = 14, ...props }, forwardedRef) => {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 14 14\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      ref={forwardedRef}\n      {...props}\n    >\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.544 10.206a5.5 5.5 0 11.662-.662.5.5 0 01.148.102l3 3a.5.5 0 01-.708.708l-3-3a.5.5 0 01-.102-.148zM10.5 6a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z\"\n        fill={color}\n      />\n    </svg>\n  );\n});\n","import * as React from 'react';\nimport { IconProps } from '../types';\n\nexport const ZoomIcon = /* @__PURE__ */ React.forwardRef<\n  SVGSVGElement,\n  IconProps\n>(({ color = 'currentColor', size = 14, ...props }, forwardedRef) => {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 14 14\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      ref={forwardedRef}\n      {...props}\n    >\n      <path\n        d=\"M6 3.5a.5.5 0 01.5.5v1.5H8a.5.5 0 010 1H6.5V8a.5.5 0 01-1 0V6.5H4a.5.5 0 010-1h1.5V4a.5.5 0 01.5-.5z\"\n        fill={color}\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.544 10.206a5.5 5.5 0 11.662-.662.5.5 0 01.148.102l3 3a.5.5 0 01-.708.708l-3-3a.5.5 0 01-.102-.148zM10.5 6a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z\"\n        fill={color}\n      />\n    </svg>\n  );\n});\n","import * as React from 'react';\nimport { IconProps } from '../types';\n\nexport const ZoomOutIcon = /* @__PURE__ */ React.forwardRef<\n  SVGSVGElement,\n  IconProps\n>(({ color = 'currentColor', size = 14, ...props }, forwardedRef) => {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 14 14\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      ref={forwardedRef}\n      {...props}\n    >\n      <path d=\"M4 5.5a.5.5 0 000 1h4a.5.5 0 000-1H4z\" fill={color} />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M6 11.5c1.35 0 2.587-.487 3.544-1.294a.5.5 0 00.102.148l3 3a.5.5 0 00.708-.708l-3-3a.5.5 0 00-.148-.102A5.5 5.5 0 106 11.5zm0-1a4.5 4.5 0 100-9 4.5 4.5 0 000 9z\"\n        fill={color}\n      />\n    </svg>\n  );\n});\n","/** @jsx jsx */\nimport { Fragment, FC } from \"react\";\nimport { jsx } from \"storybook/theming\";\n\nimport { IconButton } from \"storybook/internal/components\";\nimport { ZoomIcon, ZoomOutIcon, ZoomResetIcon } from \"@storybook/icons\";\n\ninterface Props {\n  onZoomIn?(): any;\n  onZoomOut?(): any;\n  onReset?(): any;\n}\n\nexport const ZoomButtons: FC<Props> = ({ onZoomIn, onZoomOut, onReset }) => (\n  <Fragment>\n    <IconButton onClick={onZoomIn}>\n      <ZoomIcon />\n    </IconButton>\n    <IconButton onClick={onZoomOut}>\n      <ZoomOutIcon />\n    </IconButton>\n    <IconButton onClick={onReset}>\n      <ZoomResetIcon />\n    </IconButton>\n  </Fragment>\n);\n\nexport default ZoomButtons;\n","import { useCallback, useEffect, useState, DependencyList } from \"react\";\n\ntype UseZoom = (\n  initialValue: number,\n  deps: DependencyList,\n) => {\n  /**\n   * Current scale factor.\n   * 0.0 < n < Infinity\n   */\n  scale: number;\n\n  /**\n   * Zoom in\n   */\n  zoomIn(): void;\n\n  /**\n   * Zoom out\n   */\n  zoomOut(): void;\n\n  /**\n   * Reset scale factor to 1.\n   */\n  resetZoom(): void;\n};\n\nexport const useZoom: UseZoom = (initialValue, deps) => {\n  const [scale, setScale] = useState<number>(1);\n\n  useEffect(() => {\n    setScale(initialValue);\n  }, deps);\n\n  const zoomIn = useCallback(() => {\n    setScale((prevScale) => prevScale + 0.1);\n  }, [setScale]);\n\n  const zoomOut = useCallback(() => {\n    setScale((prevScale) => Math.max(prevScale - 0.1, 0.1));\n  }, [setScale]);\n\n  const resetZoom = useCallback(() => {\n    setScale(1);\n  }, [setScale]);\n\n  return { scale, zoomIn, zoomOut, resetZoom };\n};\n","/** @jsx jsx */\nimport { Fragment, useMemo, CSSProperties, FC } from \"react\";\nimport { css, jsx } from \"storybook/theming\";\n\nimport { FlexBar, Separator } from \"storybook/internal/components\";\n\nimport { Pan } from \"./Pan\";\nimport { ZoomButtons } from \"./ZoomButtons\";\n\nimport { ImageConfig } from \"../../config\";\n\nimport { useZoom } from \"./hooks/useZoom\";\n\ninterface Props {\n  config: ImageConfig;\n}\n\nexport const ImagePreview: FC<Props> = ({ config }) => {\n  const zoom = useZoom(config.scale || 1, [config.scale]);\n\n  const imageStyles = useMemo<CSSProperties>(\n    () => ({\n      transform: `scale(${zoom.scale})`,\n    }),\n    [zoom.scale],\n  );\n\n  return (\n    <div css={$container}>\n      <FlexBar border>\n        <div\n          style={{\n            display: \"grid\",\n            gridAutoFlow: \"column\",\n            gap: \"4px\",\n            alignItems: \"center\",\n          }}\n        >\n          <Fragment key=\"left\">\n            <p>\n              <b>Image</b>\n            </p>\n            <Separator />\n            <ZoomButtons\n              onReset={zoom.resetZoom}\n              onZoomIn={zoom.zoomIn}\n              onZoomOut={zoom.zoomOut}\n            />\n          </Fragment>\n        </div>\n      </FlexBar>\n      <Pan css={$preview} defaultValue={config.offset}>\n        <img css={$image} src={config.url} style={imageStyles} />\n      </Pan>\n    </div>\n  );\n};\n\nexport default ImagePreview;\n\nconst $container = css`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n`;\n\nconst $preview = css`\n  flex-grow: 1;\n`;\n\nconst $image = css`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n\n  pointer-events: none;\n  border-radius: 1px;\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.15);\n`;\n","/** @jsx jsx */\nimport { Fragment, lazy, Suspense, FC } from \"react\";\nimport { jsx } from \"storybook/theming\";\n\nimport { Link, Placeholder } from \"storybook/internal/components\";\n\nimport { Config } from \"../../config\";\n\nimport { Figma } from \"./Figma\";\nimport { IFrame } from \"./IFrame\";\nimport { ImagePreview } from \"./Image\";\nimport { LinkPanel } from \"./LinkPanel\";\nimport { Sketch } from \"./Sketch\";\nimport { Tab, Tabs } from \"./Tabs\";\n\nconst Figspec = lazy(() => import(\"./Figspec\"));\n\ninterface Props {\n  config?: Config | Config[];\n}\n\nexport const Wrapper: FC<Props> = ({ config }) => {\n  if (!config || (\"length\" in config && config.length === 0)) {\n    return (\n      <Placeholder>\n        <Fragment>No designs found</Fragment>\n        <Fragment>\n          Learn how to{\" \"}\n          <Link\n            href=\"https://github.com/storybookjs/addon-designs#3-add-it-to-story\"\n            target=\"_blank\"\n            rel=\"noopener\"\n            withArrow\n            cancel={false}\n          >\n            display design preview for the story\n          </Link>\n        </Fragment>\n      </Placeholder>\n    );\n  }\n\n  const tabs = [...(config instanceof Array ? config : [config])].map<Tab>(\n    (cfg) => {\n      const meta: Omit<Tab, \"content\"> = {\n        id: JSON.stringify(cfg),\n        name:\n          cfg.name ||\n          (cfg.type as Config[\"type\"] | undefined)?.toUpperCase() ||\n          \"ERROR\",\n        offscreen: cfg.offscreen ?? true,\n      };\n\n      switch (cfg.type) {\n        case \"iframe\":\n          return {\n            ...meta,\n            content: <IFrame config={cfg} />,\n          };\n        case \"figma\":\n          return {\n            ...meta,\n            content: <Figma config={cfg} />,\n            offscreen: false,\n          };\n        case \"sketch\":\n          return {\n            ...meta,\n            content: <Sketch config={cfg} />,\n          };\n        case \"figspec\":\n        case \"experimental-figspec\":\n          if (cfg.type === \"experimental-figspec\") {\n            console.warn(\n              \"[storybook-addon-designs] `experimental-figspec` is deprecated. We will remove it in v7.0. Please replace it to `figspec` type.\",\n            );\n          }\n\n          return {\n            ...meta,\n            content: (\n              <Suspense fallback=\"Preparing Figspec viewer...\">\n                <Figspec config={cfg} />\n              </Suspense>\n            ),\n            offscreen: false,\n          };\n        case \"image\":\n          return {\n            ...meta,\n            content: <ImagePreview config={cfg} />,\n          };\n        case \"link\":\n          return {\n            ...meta,\n            content: <LinkPanel config={cfg} />,\n          };\n      }\n\n      // FIXME: Link is temporarily set to source code due to \"Available config types\" section\n      //        had been removed from README. We need to add a list to README or docs site.\n      //        This is very much user-unfriendly, especially for whom not familier with TypeScript.\n      return {\n        ...meta,\n        content: (\n          <Placeholder>\n            <Fragment>Invalid config type</Fragment>\n            <Fragment>\n              Config type you set is not supported. Please choose one from{\" \"}\n              <Link\n                href=\"https://github.com/storybookjs/addon-designs/blob/master/packages/storybook-addon-designs/src/config.ts\"\n                target=\"_blank\"\n                rel=\"noopener\"\n                withArrow\n                cancel={false}\n              >\n                available config types\n              </Link>\n            </Fragment>\n          </Placeholder>\n        ),\n      };\n    },\n  );\n\n  if (tabs.length === 1) {\n    return <div>{tabs[0].content}</div>;\n  }\n\n  return <Tabs tabs={tabs} deps={[config]} />;\n};\n\nexport default Wrapper;\n","/** @jsx jsx */\nimport { FC } from \"react\";\nimport { css, jsx } from \"storybook/theming\";\n\nimport { Link } from \"storybook/internal/components\";\n\nimport { LinkConfig } from \"../../config\";\n\ninterface Props {\n  config: LinkConfig;\n}\n\nexport const LinkPanel: FC<Props> = ({ config }) => (\n  <div css={$container}>\n    <Link\n      cancel={false}\n      href={config.url}\n      target={config.target ?? \"_blank\"}\n      rel={config.rel ?? \"noopener\"}\n      withArrow={config.showArrow ?? true}\n    >\n      {config.label || config.url}\n    </Link>\n  </div>\n);\n\nexport default LinkPanel;\n\nconst $container = css`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n","/** @jsx jsx */\nimport { Link, Placeholder } from \"storybook/internal/components\";\nimport { jsx } from \"storybook/theming\";\nimport { FC, Fragment, ReactNode, useMemo } from \"react\";\n\nimport { SketchConfig, IFrameConfigBase } from \"../../config\";\n\nimport { IFrame } from \"./IFrame\";\n\ninterface ParseSucceeded<T> {\n  valid: true;\n\n  data: T;\n}\n\ninterface ParseFailed {\n  valid: false;\n\n  error: ReactNode;\n}\n\ntype Parser<T> = (url: URL) => ParseSucceeded<T> | ParseFailed;\n\nexport const v1UrlParser: Parser<IFrameConfigBase> = (url) => {\n  if (url.protocol !== \"https:\") {\n    return {\n      valid: false,\n      error: (\n        <Fragment>\n          Expected HTTPS link, received <code>{url.protocol}</code>.\n        </Fragment>\n      ),\n    };\n  }\n\n  if (url.hostname !== \"www.sketch.com\") {\n    return {\n      valid: false,\n      error: (\n        <Fragment>\n          Expected a hostname <code>www.sketch.com</code>, received{\" \"}\n          <code>{url.hostname}</code>\n        </Fragment>\n      ),\n    };\n  }\n\n  const malformedUrlErrorMessage = (\n    <Fragment>\n      Expected pathname <code>{\"/s/<string>/a/<string>\"}</code>, received{\" \"}\n      <code>{url.pathname}</code>.\n    </Fragment>\n  );\n\n  const pathSegments = url.pathname.split(\"/\").slice(1);\n  if (pathSegments.length < 4) {\n    return {\n      valid: false,\n      error: malformedUrlErrorMessage,\n    };\n  }\n\n  if (pathSegments[0] === \"embed\") {\n    return {\n      valid: true,\n      data: {\n        url: url.href,\n        offscreen: false,\n      },\n    };\n  }\n\n  const [s, sid, a, aid] = pathSegments;\n  if (s !== \"s\" || !sid || a !== \"a\" || !aid) {\n    return {\n      valid: false,\n      error: malformedUrlErrorMessage,\n    };\n  }\n\n  return {\n    valid: true,\n    data: {\n      url: `https://www.sketch.com/embed/s/${sid}/a/${aid}`,\n      offscreen: false,\n    },\n  };\n};\n\ninterface Props {\n  config: SketchConfig;\n}\n\nexport const Sketch: FC<Props> = ({ config }) => {\n  const result = useMemo(() => {\n    const parsed = v1UrlParser(new URL(config.url));\n    if (!parsed.valid) {\n      return parsed;\n    }\n\n    return {\n      ...parsed,\n      data: {\n        ...config,\n        ...parsed.data,\n      },\n    };\n  }, [config]);\n\n  if (!result.valid) {\n    return (\n      <Placeholder>\n        <Fragment>Invalid Sketch URL</Fragment>\n        <Fragment>{result.error}</Fragment>\n      </Placeholder>\n    );\n  }\n\n  return <IFrame defer config={result.data} />;\n};\n","/** @jsx jsx */\nimport { DependencyList, FC, ReactNode, useEffect, useState } from \"react\";\nimport { jsx } from \"storybook/theming\";\n\nimport { Tabs as SbTabs } from \"storybook/internal/components\";\n\nexport interface Tab {\n  id: string;\n  name: string;\n  content: ReactNode;\n  offscreen: boolean;\n}\n\nexport interface TabsProps {\n  tabs: readonly Tab[];\n\n  /**\n   * Effect trigger for tab initialization. Everytime this dependency list is\n   * updated, the selection goes to the first tab.\n   */\n  deps?: DependencyList;\n}\n\nexport const Tabs: FC<TabsProps> = ({ tabs, deps = [] }) => {\n  const [selected, setSelected] = useState(tabs[0].id);\n\n  useEffect(() => {\n    setSelected(tabs[0].id);\n  }, deps);\n\n  return (\n    <SbTabs absolute selected={selected} actions={{ onSelect: setSelected }}>\n      {tabs.map((tab) => (\n        <div key={tab.id} id={tab.id} title={tab.name}>\n          {tab.offscreen || selected === tab.id ? tab.content : null}\n        </div>\n      ))}\n    </SbTabs>\n  );\n};\n","/**\n * The identifier of the addon.\n */\nexport const AddonName = \"STORYBOOK_ADDON_DESIGNS\";\n\n/**\n * The name of the panel.\n */\nexport const PanelName = AddonName + \"/panel\";\n\n/**\n * Addon events.\n */\nexport const Events = {\n  UpdateConfig: AddonName + \"/update_config\",\n};\n\n/**\n * A key of story parameters.\n */\nexport const ParameterName = \"design\";\n"]}